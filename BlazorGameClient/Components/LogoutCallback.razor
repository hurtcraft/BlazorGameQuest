@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthenticationStateProvider

<div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column;">
    <p>Déconnexion réussie ! Redirection en cours...</p>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Attendre que la déconnexion soit complètement terminée
            await Task.Delay(1000);
            
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            if (authState.User.Identity?.IsAuthenticated != true)
            {
                // Rediriger vers la page de login après déconnexion réussie
                Navigation.NavigateTo("/", forceLoad: true);
            }
        }
    }
}

